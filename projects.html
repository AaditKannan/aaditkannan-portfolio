<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  
  <!-- Primary Meta Tags -->
  <title>Aadit Kannan | Projects</title>
  <meta name="title" content="Aadit Kannan | Projects">
  <meta name="description" content="Explore Aadit Kannan's engineering projects - from Formula Electric battery systems to robotics, flood detection, and web development.">
  <meta name="keywords" content="Aadit Kannan projects, engineering projects, robotics, Formula Electric, UC Berkeley, portfolio">
  <meta name="author" content="Aadit Kannan">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://aaditkannan.com/projects">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://aaditkannan.com/projects">
  <meta property="og:title" content="Aadit Kannan | Projects">
  <meta property="og:description" content="Explore Aadit Kannan's engineering projects.">
  <meta property="og:image" content="https://aaditkannan.com/assets/photo.jpg">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://aaditkannan.com/projects">
  <meta property="twitter:title" content="Aadit Kannan | Projects">
  <meta property="twitter:description" content="Explore Aadit Kannan's engineering projects.">
  <meta property="twitter:image" content="https://aaditkannan.com/assets/photo.jpg">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon-simple.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #000000;
      --text-white: #FFFFFF;
      --text-gray: #666;
      --text-light: #999;
      --border-subtle: rgba(255, 255, 255, 0.08);
      --border-hover: rgba(255, 255, 255, 0.2);
    }

    html, body {
      overflow: hidden;
      height: 100%;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    html::-webkit-scrollbar, body::-webkit-scrollbar {
      display: none;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-dark);
      color: var(--text-white);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Subtle dot grid background */
    .bg-pattern {
      position: fixed;
      inset: 0;
      background-image: radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 32px 32px;
      z-index: -1;
    }

    /* Navigation Bar */
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1001;
      padding: 24px 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.95) 0%, transparent 100%);
      height: 80px;
      box-sizing: border-box;
    }

    .nav-link {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      transition: all 0.3s ease;
      padding: 8px 0;
      border: none;
      border-bottom: 1px solid transparent;
      background: transparent;
      font-family: 'Courier Prime', 'JetBrains Mono', 'Courier New', monospace;
    }

    .nav-link:hover {
      color: #FFFFFF;
      border-bottom-color: rgba(255, 255, 255, 0.5);
    }

    .nav-link.active {
      color: #FFFFFF;
      border-bottom-color: #FFFFFF;
    }

    /* Canvas container */
    #graphCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      cursor: grab;
    }

    #graphCanvas:active {
      cursor: grabbing;
    }

    /* Project detail panel */
    .project-panel {
      position: fixed;
      top: 100px;
      right: -480px;
      width: 440px;
      max-height: calc(100vh - 140px);
      background: rgba(0, 0, 0, 0.97);
      border: 1px solid var(--border-subtle);
      border-radius: 2px;
      padding: 36px;
      z-index: 1000;
      transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      overflow-y: auto;
      backdrop-filter: blur(20px);
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.1) transparent;
    }

    .project-panel::-webkit-scrollbar {
      width: 4px;
    }

    .project-panel::-webkit-scrollbar-track {
      background: transparent;
    }

    .project-panel::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
    }

    .project-panel.visible {
      right: 30px;
    }

    .project-panel-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 28px;
      height: 28px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      border-radius: 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .project-panel-close:hover {
      border-color: var(--border-hover);
    }

    .project-panel-close::before,
    .project-panel-close::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 1px;
      background: #fff;
    }

    .project-panel-close::before {
      transform: rotate(45deg);
    }

    .project-panel-close::after {
      transform: rotate(-45deg);
    }

    .project-category {
      display: inline-block;
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-gray);
      margin-bottom: 16px;
      font-family: 'Courier Prime', monospace;
    }

    .project-title {
      font-family: 'Inter', sans-serif;
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
      line-height: 1.3;
      letter-spacing: -0.02em;
    }

    .project-date {
      font-size: 13px;
      color: var(--text-gray);
      margin-bottom: 24px;
      font-family: 'Courier Prime', monospace;
    }

    /* Project images */
    .project-images {
      margin-bottom: 24px;
      display: none;
    }

    .project-images.has-images {
      display: block;
    }

    .project-image-main {
      width: 100%;
      aspect-ratio: 16/10;
      object-fit: cover;
      border: 1px solid var(--border-subtle);
      margin-bottom: 8px;
      background: rgba(255,255,255,0.02);
    }

    .project-image-thumbs {
      display: flex;
      gap: 8px;
    }

    .project-image-thumb {
      width: 60px;
      height: 40px;
      object-fit: cover;
      border: 1px solid var(--border-subtle);
      cursor: pointer;
      opacity: 0.6;
      transition: all 0.2s ease;
      background: rgba(255,255,255,0.02);
    }

    .project-image-thumb:hover,
    .project-image-thumb.active {
      opacity: 1;
      border-color: var(--border-hover);
    }

    .project-description {
      font-size: 14px;
      line-height: 1.8;
      color: var(--text-light);
      margin-bottom: 24px;
    }

    /* Project links */
    .project-links {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .project-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      color: var(--text-light);
      text-decoration: none;
      font-size: 12px;
      font-family: 'Courier Prime', monospace;
      letter-spacing: 0.05em;
      transition: all 0.2s ease;
    }

    .project-link:hover {
      border-color: var(--border-hover);
      color: #fff;
    }

    .project-link svg {
      width: 14px;
      height: 14px;
      fill: currentColor;
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .project-tag {
      padding: 6px 12px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      font-size: 11px;
      color: var(--text-gray);
      font-family: 'Courier Prime', monospace;
      letter-spacing: 0.05em;
    }

    /* Instructions */
    .instructions {
      position: fixed;
      bottom: 30px;
      right: 30px;
      font-size: 11px;
      color: var(--text-gray);
      text-align: right;
      z-index: 100;
      font-family: 'Courier Prime', monospace;
      letter-spacing: 0.05em;
    }

    /* Node tooltip */
    .node-tooltip {
      position: fixed;
      padding: 8px 14px;
      background: rgba(0, 0, 0, 0.95);
      border: 1px solid var(--border-subtle);
      font-size: 12px;
      color: #fff;
      pointer-events: none;
      z-index: 1002;
      opacity: 0;
      transition: opacity 0.15s ease;
      font-family: 'Inter', sans-serif;
      letter-spacing: 0.02em;
    }

    .node-tooltip.visible {
      opacity: 1;
    }

    /* Image lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .lightbox.visible {
      opacity: 1;
      visibility: visible;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
    }

    .lightbox-close {
      position: absolute;
      top: 30px;
      right: 30px;
      width: 40px;
      height: 40px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-close::before,
    .lightbox-close::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 1px;
      background: #fff;
    }

    .lightbox-close::before {
      transform: rotate(45deg);
    }

    .lightbox-close::after {
      transform: rotate(-45deg);
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .nav-bar {
        padding: 20px 24px;
        gap: 24px;
        height: 70px;
      }

      .nav-link {
        font-size: 11px;
        letter-spacing: 0.1em;
      }

      .project-panel {
        top: auto;
        bottom: 0;
        right: 0;
        left: 0;
        width: 100%;
        max-height: 70vh;
        border-radius: 0;
        border-top: 1px solid var(--border-subtle);
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        padding: 28px;
      }

      .project-panel.visible {
        right: 0;
        transform: translateY(0);
      }

      .instructions {
        display: none;
      }

      .project-title {
        font-size: 20px;
      }

      .project-description {
        font-size: 13px;
      }

      .project-links {
        gap: 8px;
      }

      .project-link {
        padding: 8px 12px;
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="bg-pattern"></div>

  <!-- Navigation Bar -->
  <nav class="nav-bar">
    <a href="/" class="nav-link">HOME</a>
    <a href="/resume" class="nav-link">RESUME</a>
    <a href="/projects" class="nav-link active">PROJECTS</a>
    <a href="/connect" class="nav-link">CONNECT</a>
    <a href="/footage" class="nav-link">FOOTAGE</a>
  </nav>

  <!-- Graph Canvas -->
  <canvas id="graphCanvas"></canvas>

  <!-- Node Tooltip -->
  <div class="node-tooltip" id="nodeTooltip"></div>

  <!-- Project Detail Panel -->
  <div class="project-panel" id="projectPanel">
    <button class="project-panel-close" id="panelClose" aria-label="Close"></button>
    <span class="project-category" id="panelCategory">Category</span>
    <h2 class="project-title" id="panelTitle">Project Title</h2>
    <p class="project-date" id="panelDate">2024 - Present</p>
    
    <div class="project-images" id="panelImages">
      <img class="project-image-main" id="panelImageMain" src="" alt="Project image">
      <div class="project-image-thumbs" id="panelImageThumbs"></div>
    </div>
    
    <p class="project-description" id="panelDescription">Project description goes here...</p>
    
    <div class="project-links" id="panelLinks"></div>
    
    <div class="project-tags" id="panelTags"></div>
  </div>

  <!-- Image Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="lightboxClose" aria-label="Close"></button>
    <img id="lightboxImage" src="" alt="Full size image">
  </div>

  <!-- Instructions -->
  <div class="instructions">
    CLICK TO VIEW • DRAG TO PAN • SCROLL TO ZOOM
  </div>

  <script>
    // Project data with links and images
    const projects = [
      {
        id: 'formula-electric',
        title: 'Formula Electric',
        category: 'hardware',
        date: '2025 - Present',
        description: 'Designed and manufactured the attic casing for the high-voltage accumulator (battery) for Berkeley\'s Formula Electric racing team. Implemented waterproofing and high-dielectric-strength insulation to safely manage the 588V battery pack.',
        tags: ['CAD', 'Manufacturing', 'High Voltage', 'Composites'],
        connections: ['robotics-first', 'inventry'],
        size: 1.4,
        links: [
          { type: 'website', url: 'https://ev.berkeley.edu/', label: 'Team Website' }
        ],
        images: []
      },
      {
        id: 'robotics-first',
        title: 'Robotics (FIRST)',
        category: 'hardware',
        date: '2021 - 2025',
        description: 'Led robotics teams as Captain of Zenith #20424 and Hardware Lead of Deja Vu #13216. Mentored 30+ members in Java and CAD, designed robots with 500+ parts using FEA optimization, and won robot design awards 3 times. Raised over $5000 and developed team websites.',
        tags: ['CAD', 'FEA', 'Java', 'Leadership', 'Mentoring'],
        connections: ['inventry', 'pear-volunteering', 'formula-electric'],
        size: 1.3,
        links: [
          { type: 'website', url: 'https://www.thebluealliance.com/team/20424', label: 'Zenith #20424' },
          { type: 'website', url: 'https://www.thebluealliance.com/team/13216', label: 'Deja Vu #13216' }
        ],
        images: []
      },
      {
        id: 'inventry',
        title: 'Inventry',
        category: 'software',
        date: '2025 - Present',
        description: 'Developed a website for robotics part inventory tracking, utilizing AI invoice indexing and dynamic webscraping for 1000+ part catalogs. Integrated part-lending service with incentives and extensive privacy measures. Currently developing a parts marketplace.',
        tags: ['Web Dev', 'AI', 'Webscraping', 'Database'],
        connections: ['robotics-first', 'pear-volunteering'],
        size: 1.2,
        links: [],
        images: []
      },
      {
        id: 'atlas-smr',
        title: 'Atlas SMR',
        category: 'research',
        date: '2024',
        description: 'Developed an interactive web tool to evaluate Small Modular Reactor (SMR) feasibility in rural areas, integrating geospatial data and weighted scoring to compare site viability. Added hybrid SMR–solar modeling to visualize energy demand, environmental constraints, and overall system potential.',
        tags: ['Web Dev', 'GIS', 'Energy', 'Data Viz'],
        connections: ['construction-acclimation', 'friendly-fires'],
        size: 1.1,
        links: [],
        images: []
      },
      {
        id: 'construction-acclimation',
        title: 'Construction Acclimation',
        category: 'research',
        date: '2022 - 2023',
        description: 'Gathered construction site data to develop alternative devices to costly acclimation probes, aiming to cut $118M from Palo Alto\'s spending. Built a website and functioning probe prototype that earned praise from city construction officials.',
        tags: ['Hardware', 'Data Collection', 'Web Dev', 'City Planning'],
        connections: ['atlas-smr', 'prototype-flood'],
        size: 1.0,
        links: [],
        images: []
      },
      {
        id: 'beachsweep',
        title: 'Beachsweep',
        category: 'hardware',
        date: '2023',
        description: 'Hackathon project designing a website for organizing drone beach cleanups. Utilized solar-powered drone docks that work to maintain beach cleanliness and collaborate with human initiatives. Designed a computer vision drone trash detection system.',
        tags: ['Drones', 'Computer Vision', 'Solar', 'Web Dev'],
        connections: ['friendly-fires', 'prototype-flood'],
        size: 1.0,
        links: [],
        images: []
      },
      {
        id: 'friendly-fires',
        title: 'Friendly Fires',
        category: 'social',
        date: '2021 - 2022',
        description: 'Created a mining tool attachment consisting of a compact sensor array capable of consistently detecting coal-seam fires, aiming to save lives in dangerous and often neglected mining conditions.',
        tags: ['Sensors', 'Safety', 'Hardware', 'Mining'],
        connections: ['prototype-flood', 'atlas-smr', 'beachsweep'],
        size: 1.0,
        links: [],
        images: []
      },
      {
        id: 'prototype-flood',
        title: 'Prototype Ø Flood',
        category: 'social',
        date: '2020 - 2021',
        description: 'Designed a low-cost flood detection system intended for addressing the lack of alert technology in Jakarta, Indonesia. Won certificate of achievement from the American Society of Civil Engineers.',
        tags: ['Sensors', 'IoT', 'Social Impact', 'International'],
        connections: ['friendly-fires', 'construction-acclimation', 'beachsweep'],
        size: 1.0,
        links: [],
        images: []
      },
      {
        id: 'pear-volunteering',
        title: 'Pear Volunteering',
        category: 'software',
        date: '2023 - 2025',
        description: 'Developed an app and website to connect 2000+ students, 20+ event organizers, and school admin for volunteer opportunities. Implemented secure webhook/CMS-integrated system for scalable, high-volume data handling and encrypted user communication.',
        tags: ['App Dev', 'Web Dev', 'CMS', 'Security'],
        connections: ['robotics-first', 'inventry'],
        size: 1.2,
        links: [],
        images: []
      }
    ];

    // SVG icons
    const icons = {
      website: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>',
      github: '<svg viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>',
      demo: '<svg viewBox="0 0 24 24"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>',
      doc: '<svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>'
    };

    // Canvas setup
    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');
    const tooltip = document.getElementById('nodeTooltip');
    const panel = document.getElementById('projectPanel');
    const panelClose = document.getElementById('panelClose');
    const lightbox = document.getElementById('lightbox');
    const lightboxClose = document.getElementById('lightboxClose');
    const lightboxImage = document.getElementById('lightboxImage');

    let width, height;
    let nodes = [];
    let edges = [];
    let offsetX = 0, offsetY = 0;
    let scale = 1;
    let isDragging = false;
    let dragStartX, dragStartY;
    let hoveredNode = null;
    let selectedNode = null;
    let animationFrame;
    let time = 0;

    // Physics simulation parameters
    const REPULSION = 18000;
    const ATTRACTION = 0.006;
    const DAMPING = 0.88;
    const CENTER_GRAVITY = 0.008;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width * window.devicePixelRatio;
      canvas.height = height * window.devicePixelRatio;
      canvas.style.width = width + 'px';
      canvas.style.height = height + 'px';
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
    }

    function initNodes() {
      const centerX = width / 2;
      const centerY = height / 2;
      const radius = Math.min(width, height) * 0.28;

      nodes = projects.map((project, i) => {
        const angle = (i / projects.length) * Math.PI * 2 - Math.PI / 2;
        return {
          ...project,
          x: centerX + Math.cos(angle) * radius + (Math.random() - 0.5) * 80,
          y: centerY + Math.sin(angle) * radius + (Math.random() - 0.5) * 80,
          vx: 0,
          vy: 0,
          baseRadius: 20 * (project.size || 1),
          phase: Math.random() * Math.PI * 2
        };
      });

      // Build edges from connections
      edges = [];
      nodes.forEach(node => {
        if (node.connections) {
          node.connections.forEach(targetId => {
            const target = nodes.find(n => n.id === targetId);
            if (target && !edges.find(e => 
              (e.source.id === node.id && e.target.id === targetId) ||
              (e.source.id === targetId && e.target.id === node.id)
            )) {
              edges.push({ source: node, target });
            }
          });
        }
      });
    }

    function simulate() {
      nodes.forEach(node => {
        nodes.forEach(other => {
          if (node === other) return;
          const dx = node.x - other.x;
          const dy = node.y - other.y;
          const dist = Math.sqrt(dx * dx + dy * dy) || 1;
          const force = REPULSION / (dist * dist);
          node.vx += (dx / dist) * force;
          node.vy += (dy / dist) * force;
        });

        const centerX = width / 2;
        const centerY = height / 2;
        node.vx += (centerX - node.x) * CENTER_GRAVITY;
        node.vy += (centerY - node.y) * CENTER_GRAVITY;
      });

      edges.forEach(edge => {
        const dx = edge.target.x - edge.source.x;
        const dy = edge.target.y - edge.source.y;
        const dist = Math.sqrt(dx * dx + dy * dy) || 1;
        const force = dist * ATTRACTION;
        edge.source.vx += (dx / dist) * force;
        edge.source.vy += (dy / dist) * force;
        edge.target.vx -= (dx / dist) * force;
        edge.target.vy -= (dy / dist) * force;
      });

      nodes.forEach(node => {
        node.vx *= DAMPING;
        node.vy *= DAMPING;
        node.x += node.vx;
        node.y += node.vy;
      });
    }

    function draw() {
      time += 0.016;
      ctx.clearRect(0, 0, width, height);
      ctx.save();
      ctx.translate(offsetX, offsetY);
      ctx.scale(scale, scale);

      // Draw edges
      edges.forEach(edge => {
        const dx = edge.target.x - edge.source.x;
        const dy = edge.target.y - edge.source.y;
        
        ctx.beginPath();
        ctx.moveTo(edge.source.x, edge.source.y);
        ctx.lineTo(edge.target.x, edge.target.y);
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.06)';
        ctx.lineWidth = 1;
        ctx.stroke();

        const speed = 0.15;
        const progress = ((time * speed) % 1);
        const px = edge.source.x + dx * progress;
        const py = edge.source.y + dy * progress;
        
        ctx.beginPath();
        ctx.arc(px, py, 1.5, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(255, 255, 255, 0.25)';
        ctx.fill();
      });

      // Draw nodes
      nodes.forEach(node => {
        const isHovered = node === hoveredNode;
        const isSelected = node === selectedNode;
        
        const breathe = Math.sin(time * 1.5 + node.phase) * 0.08 + 1;
        const nodeRadius = node.baseRadius * (isHovered ? 1.15 : isSelected ? 1.1 : breathe);

        if (isHovered || isSelected) {
          const glowGradient = ctx.createRadialGradient(
            node.x, node.y, nodeRadius * 0.5,
            node.x, node.y, nodeRadius * 2.5
          );
          glowGradient.addColorStop(0, 'rgba(255, 255, 255, 0.15)');
          glowGradient.addColorStop(1, 'transparent');
          ctx.beginPath();
          ctx.arc(node.x, node.y, nodeRadius * 2.5, 0, Math.PI * 2);
          ctx.fillStyle = glowGradient;
          ctx.fill();
        }

        ctx.beginPath();
        ctx.arc(node.x, node.y, nodeRadius, 0, Math.PI * 2);
        ctx.strokeStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.9)' 
          : 'rgba(255, 255, 255, 0.25)';
        ctx.lineWidth = isHovered || isSelected ? 1.5 : 1;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(node.x, node.y, nodeRadius - 1, 0, Math.PI * 2);
        ctx.fillStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.08)' 
          : 'rgba(255, 255, 255, 0.02)';
        ctx.fill();

        ctx.beginPath();
        ctx.arc(node.x, node.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.9)' 
          : 'rgba(255, 255, 255, 0.4)';
        ctx.fill();

        ctx.font = `500 11px 'Inter', sans-serif`;
        ctx.fillStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.95)' 
          : 'rgba(255, 255, 255, 0.5)';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'top';
        ctx.fillText(node.title, node.x, node.y + nodeRadius + 12);
      });

      ctx.restore();
      simulate();
      animationFrame = requestAnimationFrame(draw);
    }

    function getNodeAtPosition(x, y) {
      const transformedX = (x - offsetX) / scale;
      const transformedY = (y - offsetY) / scale;

      for (let i = nodes.length - 1; i >= 0; i--) {
        const node = nodes[i];
        const dx = transformedX - node.x;
        const dy = transformedY - node.y;
        const hitRadius = node.baseRadius * 1.5;
        if (dx * dx + dy * dy < hitRadius * hitRadius) {
          return node;
        }
      }
      return null;
    }

    function showPanel(node) {
      selectedNode = node;
      
      document.getElementById('panelCategory').textContent = node.category.toUpperCase();
      document.getElementById('panelTitle').textContent = node.title;
      document.getElementById('panelDate').textContent = node.date;
      document.getElementById('panelDescription').textContent = node.description;
      
      // Handle images
      const imagesContainer = document.getElementById('panelImages');
      const mainImage = document.getElementById('panelImageMain');
      const thumbsContainer = document.getElementById('panelImageThumbs');
      
      if (node.images && node.images.length > 0) {
        imagesContainer.classList.add('has-images');
        mainImage.src = node.images[0];
        mainImage.onclick = () => openLightbox(node.images[0]);
        
        if (node.images.length > 1) {
          thumbsContainer.innerHTML = node.images.map((img, i) => 
            `<img class="project-image-thumb ${i === 0 ? 'active' : ''}" src="${img}" data-index="${i}" alt="Thumbnail ${i + 1}">`
          ).join('');
          
          thumbsContainer.querySelectorAll('.project-image-thumb').forEach(thumb => {
            thumb.onclick = () => {
              mainImage.src = thumb.src;
              mainImage.onclick = () => openLightbox(thumb.src);
              thumbsContainer.querySelectorAll('.project-image-thumb').forEach(t => t.classList.remove('active'));
              thumb.classList.add('active');
            };
          });
        } else {
          thumbsContainer.innerHTML = '';
        }
      } else {
        imagesContainer.classList.remove('has-images');
      }
      
      // Handle links
      const linksContainer = document.getElementById('panelLinks');
      if (node.links && node.links.length > 0) {
        linksContainer.innerHTML = node.links.map(link => {
          const icon = icons[link.type] || icons.website;
          return `<a href="${link.url}" target="_blank" rel="noopener noreferrer" class="project-link">${icon}${link.label}</a>`;
        }).join('');
        linksContainer.style.display = 'flex';
      } else {
        linksContainer.innerHTML = '';
        linksContainer.style.display = 'none';
      }
      
      // Handle tags
      const tagsContainer = document.getElementById('panelTags');
      tagsContainer.innerHTML = node.tags.map(tag => 
        `<span class="project-tag">${tag}</span>`
      ).join('');

      panel.classList.add('visible');
    }

    function hidePanel() {
      panel.classList.remove('visible');
      selectedNode = null;
    }

    function openLightbox(src) {
      lightboxImage.src = src;
      lightbox.classList.add('visible');
    }

    function closeLightbox() {
      lightbox.classList.remove('visible');
    }

    // Event listeners
    canvas.addEventListener('mousedown', (e) => {
      isDragging = true;
      dragStartX = e.clientX - offsetX;
      dragStartY = e.clientY - offsetY;
    });

    canvas.addEventListener('mousemove', (e) => {
      if (isDragging) {
        offsetX = e.clientX - dragStartX;
        offsetY = e.clientY - dragStartY;
      }

      const node = getNodeAtPosition(e.clientX, e.clientY);
      hoveredNode = node;
      canvas.style.cursor = node ? 'pointer' : 'grab';

      if (node) {
        tooltip.textContent = node.title;
        tooltip.style.left = e.clientX + 15 + 'px';
        tooltip.style.top = e.clientY + 15 + 'px';
        tooltip.classList.add('visible');
      } else {
        tooltip.classList.remove('visible');
      }
    });

    canvas.addEventListener('mouseup', () => {
      isDragging = false;
    });

    canvas.addEventListener('mouseleave', () => {
      isDragging = false;
      hoveredNode = null;
      tooltip.classList.remove('visible');
    });

    canvas.addEventListener('click', (e) => {
      const node = getNodeAtPosition(e.clientX, e.clientY);
      if (node) {
        showPanel(node);
      }
    });

    canvas.addEventListener('wheel', (e) => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? 0.92 : 1.08;
      const newScale = Math.max(0.4, Math.min(2.5, scale * delta));
      
      const mouseX = e.clientX;
      const mouseY = e.clientY;
      offsetX = mouseX - (mouseX - offsetX) * (newScale / scale);
      offsetY = mouseY - (mouseY - offsetY) * (newScale / scale);
      scale = newScale;
    }, { passive: false });

    panelClose.addEventListener('click', hidePanel);
    lightboxClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    // Touch events for mobile
    let touchStartX, touchStartY, lastTouchDist;

    canvas.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        touchStartX = e.touches[0].clientX - offsetX;
        touchStartY = e.touches[0].clientY - offsetY;
      } else if (e.touches.length === 2) {
        lastTouchDist = Math.hypot(
          e.touches[0].clientX - e.touches[1].clientX,
          e.touches[0].clientY - e.touches[1].clientY
        );
      }
    }, { passive: true });

    canvas.addEventListener('touchmove', (e) => {
      e.preventDefault();
      if (e.touches.length === 1) {
        offsetX = e.touches[0].clientX - touchStartX;
        offsetY = e.touches[0].clientY - touchStartY;
      } else if (e.touches.length === 2) {
        const dist = Math.hypot(
          e.touches[0].clientX - e.touches[1].clientX,
          e.touches[0].clientY - e.touches[1].clientY
        );
        const delta = dist / lastTouchDist;
        scale = Math.max(0.4, Math.min(2.5, scale * delta));
        lastTouchDist = dist;
      }
    }, { passive: false });

    canvas.addEventListener('touchend', (e) => {
      if (e.changedTouches.length === 1) {
        const node = getNodeAtPosition(
          e.changedTouches[0].clientX,
          e.changedTouches[0].clientY
        );
        if (node) showPanel(node);
      }
    });

    // Keyboard escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (lightbox.classList.contains('visible')) {
          closeLightbox();
        } else {
          hidePanel();
        }
      }
    });

    // Initialize
    window.addEventListener('resize', resize);
    resize();
    initNodes();
    draw();
  </script>
</body>
</html>
