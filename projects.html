<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  
  <!-- Primary Meta Tags -->
  <title>Aadit Kannan | Projects</title>
  <meta name="title" content="Aadit Kannan | Projects">
  <meta name="description" content="Explore Aadit Kannan's engineering projects - from Formula Electric battery systems to robotics, flood detection, and web development.">
  <meta name="keywords" content="Aadit Kannan projects, engineering projects, robotics, Formula Electric, UC Berkeley, portfolio">
  <meta name="author" content="Aadit Kannan">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://aaditkannan.com/projects">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://aaditkannan.com/projects">
  <meta property="og:title" content="Aadit Kannan | Projects">
  <meta property="og:description" content="Explore Aadit Kannan's engineering projects.">
  <meta property="og:image" content="https://aaditkannan.com/assets/photo.jpg">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://aaditkannan.com/projects">
  <meta property="twitter:title" content="Aadit Kannan | Projects">
  <meta property="twitter:description" content="Explore Aadit Kannan's engineering projects.">
  <meta property="twitter:image" content="https://aaditkannan.com/assets/photo.jpg">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon-simple.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #000000;
      --text-white: #FFFFFF;
      --text-gray: #666;
      --text-light: #999;
      --border-subtle: rgba(255, 255, 255, 0.08);
      --border-hover: rgba(255, 255, 255, 0.2);
    }

    html, body {
      overflow: hidden;
      height: 100%;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-dark);
      color: var(--text-white);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Subtle dot grid background */
    .bg-pattern {
      position: fixed;
      inset: 0;
      background-image: radial-gradient(rgba(255, 255, 255, 0.025) 1px, transparent 1px);
      background-size: 40px 40px;
      z-index: -1;
    }

    /* Navigation Bar */
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1001;
      padding: 24px 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.95) 0%, transparent 100%);
      height: 80px;
      box-sizing: border-box;
    }

    .nav-link {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      transition: all 0.3s ease;
      padding: 8px 0;
      border: none;
      border-bottom: 1px solid transparent;
      background: transparent;
      font-family: 'Courier Prime', 'JetBrains Mono', 'Courier New', monospace;
    }

    .nav-link:hover {
      color: #FFFFFF;
      border-bottom-color: rgba(255, 255, 255, 0.5);
    }

    .nav-link.active {
      color: #FFFFFF;
      border-bottom-color: #FFFFFF;
    }

    /* Canvas container */
    #graphCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    /* Project detail panel */
    .project-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.95);
      width: 480px;
      max-height: 85vh;
      background: rgba(0, 0, 0, 0.98);
      border: 1px solid var(--border-subtle);
      border-radius: 2px;
      padding: 0;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.25s ease;
      overflow: hidden;
      backdrop-filter: blur(20px);
    }

    .project-panel.visible {
      opacity: 1;
      visibility: visible;
      transform: translate(-50%, -50%) scale(1);
    }

    .project-panel-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 28px;
      height: 28px;
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid var(--border-subtle);
      border-radius: 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      z-index: 10;
    }

    .project-panel-close:hover {
      border-color: var(--border-hover);
      background: rgba(0, 0, 0, 0.8);
    }

    .project-panel-close::before,
    .project-panel-close::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 1px;
      background: #fff;
    }

    .project-panel-close::before {
      transform: rotate(45deg);
    }

    .project-panel-close::after {
      transform: rotate(-45deg);
    }

    /* Project image area */
    .project-image-area {
      width: 100%;
      aspect-ratio: 16/9;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid var(--border-subtle);
      position: relative;
      overflow: hidden;
    }

    .project-image-main {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }

    .project-image-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-gray);
      gap: 12px;
    }

    .project-image-placeholder svg {
      width: 48px;
      height: 48px;
      opacity: 0.3;
    }

    .project-image-placeholder span {
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-family: 'Courier Prime', monospace;
      opacity: 0.4;
    }

    .project-image-thumbs {
      position: absolute;
      bottom: 12px;
      left: 12px;
      display: flex;
      gap: 6px;
    }

    .project-image-thumb {
      width: 48px;
      height: 32px;
      object-fit: cover;
      border: 1px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      opacity: 0.7;
      transition: all 0.2s ease;
    }

    .project-image-thumb:hover,
    .project-image-thumb.active {
      opacity: 1;
      border-color: rgba(255, 255, 255, 0.5);
    }

    /* Panel content */
    .project-panel-content {
      padding: 28px 32px 32px;
      max-height: calc(85vh - 270px);
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.1) transparent;
    }

    .project-panel-content::-webkit-scrollbar {
      width: 4px;
    }

    .project-panel-content::-webkit-scrollbar-track {
      background: transparent;
    }

    .project-panel-content::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
    }

    /* Timeline header */
    .project-header {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
    }

    .project-timeline {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 4px;
    }

    .project-year-start {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-white);
      font-family: 'Courier Prime', monospace;
    }

    .project-timeline-line {
      width: 1px;
      height: 24px;
      background: linear-gradient(to bottom, var(--text-gray), transparent);
      margin: 6px 0;
    }

    .project-year-end {
      font-size: 11px;
      color: var(--text-gray);
      font-family: 'Courier Prime', monospace;
    }

    .project-header-info {
      flex: 1;
    }

    .project-category {
      display: inline-block;
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-gray);
      margin-bottom: 8px;
      font-family: 'Courier Prime', monospace;
    }

    .project-title {
      font-family: 'Inter', sans-serif;
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 4px;
      line-height: 1.3;
      letter-spacing: -0.02em;
    }

    .project-duration {
      font-size: 12px;
      color: var(--text-gray);
      font-family: 'Courier Prime', monospace;
    }

    .project-status {
      display: inline-block;
      padding: 2px 8px;
      font-size: 9px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      border: 1px solid;
      margin-left: 8px;
      font-family: 'Courier Prime', monospace;
    }

    .project-status.active {
      color: #4ade80;
      border-color: rgba(74, 222, 128, 0.3);
    }

    .project-status.completed {
      color: var(--text-gray);
      border-color: var(--border-subtle);
    }

    .project-description {
      font-size: 14px;
      line-height: 1.75;
      color: var(--text-light);
      margin-bottom: 24px;
    }

    /* Project links */
    .project-links {
      display: flex;
      gap: 10px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .project-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      color: var(--text-light);
      text-decoration: none;
      font-size: 12px;
      font-family: 'Courier Prime', monospace;
      letter-spacing: 0.05em;
      transition: all 0.2s ease;
    }

    .project-link:hover {
      border-color: var(--border-hover);
      color: #fff;
    }

    .project-link svg {
      width: 14px;
      height: 14px;
      fill: currentColor;
    }

    .project-link.placeholder {
      opacity: 0.4;
      pointer-events: none;
      border-style: dashed;
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .project-tag {
      padding: 6px 12px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      font-size: 11px;
      color: var(--text-gray);
      font-family: 'Courier Prime', monospace;
      letter-spacing: 0.05em;
    }

    /* Node tooltip */
    .node-tooltip {
      position: fixed;
      padding: 8px 14px;
      background: rgba(0, 0, 0, 0.95);
      border: 1px solid var(--border-subtle);
      font-size: 12px;
      color: #fff;
      pointer-events: none;
      z-index: 1002;
      opacity: 0;
      transition: opacity 0.15s ease;
      font-family: 'Inter', sans-serif;
      letter-spacing: 0.02em;
    }

    .node-tooltip.visible {
      opacity: 1;
    }

    /* Overlay */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.25s ease;
    }

    .overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    /* Image lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .lightbox.visible {
      opacity: 1;
      visibility: visible;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
    }

    .lightbox-close {
      position: absolute;
      top: 30px;
      right: 30px;
      width: 40px;
      height: 40px;
      background: transparent;
      border: 1px solid var(--border-subtle);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-close::before,
    .lightbox-close::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 1px;
      background: #fff;
    }

    .lightbox-close::before {
      transform: rotate(45deg);
    }

    .lightbox-close::after {
      transform: rotate(-45deg);
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .nav-bar {
        padding: 20px 24px;
        gap: 24px;
        height: 70px;
      }

      .nav-link {
        font-size: 11px;
        letter-spacing: 0.1em;
      }

      .project-panel {
        width: calc(100% - 24px);
        max-height: 80vh;
      }

      .project-panel-content {
        padding: 24px;
      }

      .project-title {
        font-size: 18px;
      }

      .project-description {
        font-size: 13px;
      }

      .project-header {
        gap: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="bg-pattern"></div>

  <!-- Navigation Bar -->
  <nav class="nav-bar">
    <a href="/" class="nav-link">HOME</a>
    <a href="/resume" class="nav-link">RESUME</a>
    <a href="/projects" class="nav-link active">PROJECTS</a>
    <a href="/connect" class="nav-link">CONNECT</a>
    <a href="/footage" class="nav-link">FOOTAGE</a>
  </nav>

  <!-- Graph Canvas -->
  <canvas id="graphCanvas"></canvas>

  <!-- Node Tooltip -->
  <div class="node-tooltip" id="nodeTooltip"></div>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Project Detail Panel -->
  <div class="project-panel" id="projectPanel">
    <button class="project-panel-close" id="panelClose" aria-label="Close"></button>
    
    <!-- Image area -->
    <div class="project-image-area" id="panelImageArea">
      <img class="project-image-main" id="panelImageMain" src="" alt="Project image" style="display: none;">
      <div class="project-image-placeholder" id="panelImagePlaceholder">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
        </svg>
        <span>Project Photos</span>
      </div>
      <div class="project-image-thumbs" id="panelImageThumbs"></div>
    </div>
    
    <div class="project-panel-content">
      <!-- Header with timeline -->
      <div class="project-header">
        <div class="project-timeline">
          <span class="project-year-start" id="panelYearStart">2025</span>
          <div class="project-timeline-line"></div>
          <span class="project-year-end" id="panelYearEnd">Present</span>
        </div>
        <div class="project-header-info">
          <span class="project-category" id="panelCategory">Category</span>
          <h2 class="project-title" id="panelTitle">Project Title</h2>
          <p class="project-duration">
            <span id="panelDuration">Jan 2025 - Present</span>
            <span class="project-status active" id="panelStatus">Active</span>
          </p>
        </div>
      </div>
      
      <p class="project-description" id="panelDescription">Project description goes here...</p>
      
      <div class="project-links" id="panelLinks"></div>
      
      <div class="project-tags" id="panelTags"></div>
    </div>
  </div>

  <!-- Image Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="lightboxClose" aria-label="Close"></button>
    <img id="lightboxImage" src="" alt="Full size image">
  </div>

  <script>
    // Project data with detailed timeline info
    const projects = [
      {
        id: 'formula-electric',
        title: 'Formula Electric',
        category: 'hardware',
        yearStart: 2025,
        yearEnd: null, // null = present/ongoing
        monthStart: 'Jan',
        monthEnd: null,
        description: 'Designed and manufactured the attic casing for the high-voltage accumulator (battery) for Berkeley\'s Formula Electric racing team. Implemented waterproofing and high-dielectric-strength insulation to safely manage the 588V battery pack.',
        tags: ['CAD', 'Manufacturing', 'High Voltage', 'Composites'],
        connections: ['robotics-first', 'inventry'],
        size: 1.5,
        links: [
          { type: 'website', url: 'https://ev.berkeley.edu/', label: 'Team Website' }
        ],
        images: [] // Add image URLs here
      },
      {
        id: 'robotics-first',
        title: 'Robotics (FIRST)',
        category: 'hardware',
        yearStart: 2021,
        yearEnd: 2025,
        monthStart: 'Sep',
        monthEnd: 'May',
        description: 'Led robotics teams as Captain of Zenith #20424 and Hardware Lead of Deja Vu #13216. Mentored 30+ members in Java and CAD, designed robots with 500+ parts using FEA optimization, and won robot design awards 3 times. Raised over $5000 and developed team websites.',
        tags: ['CAD', 'FEA', 'Java', 'Leadership', 'Mentoring'],
        connections: ['inventry', 'pear-volunteering', 'formula-electric'],
        size: 1.4,
        links: [
          { type: 'website', url: 'https://www.thebluealliance.com/team/20424', label: 'Zenith #20424' },
          { type: 'website', url: 'https://www.thebluealliance.com/team/13216', label: 'Deja Vu #13216' }
        ],
        images: []
      },
      {
        id: 'inventry',
        title: 'Inventry',
        category: 'software',
        yearStart: 2025,
        yearEnd: null,
        monthStart: 'Jan',
        monthEnd: null,
        description: 'Developed a website for robotics part inventory tracking, utilizing AI invoice indexing and dynamic webscraping for 1000+ part catalogs. Integrated part-lending service with incentives and extensive privacy measures. Currently developing a parts marketplace.',
        tags: ['Web Dev', 'AI', 'Webscraping', 'Database'],
        connections: ['robotics-first', 'pear-volunteering'],
        size: 1.2,
        links: [
          { type: 'website', url: '', label: 'Website' } // Placeholder
        ],
        images: []
      },
      {
        id: 'pear-volunteering',
        title: 'Pear Volunteering',
        category: 'software',
        yearStart: 2023,
        yearEnd: 2025,
        monthStart: 'Aug',
        monthEnd: 'May',
        description: 'Developed an app and website to connect 2000+ students, 20+ event organizers, and school admin for volunteer opportunities. Implemented secure webhook/CMS-integrated system for scalable, high-volume data handling and encrypted user communication.',
        tags: ['App Dev', 'Web Dev', 'CMS', 'Security'],
        connections: ['robotics-first', 'inventry'],
        size: 1.15,
        links: [
          { type: 'website', url: '', label: 'Website' }
        ],
        images: []
      },
      {
        id: 'atlas-smr',
        title: 'Atlas SMR',
        category: 'research',
        yearStart: 2024,
        yearEnd: 2024,
        monthStart: 'Mar',
        monthEnd: 'Jun',
        description: 'Developed an interactive web tool to evaluate Small Modular Reactor (SMR) feasibility in rural areas, integrating geospatial data and weighted scoring to compare site viability. Added hybrid SMR–solar modeling to visualize energy demand, environmental constraints, and overall system potential.',
        tags: ['Web Dev', 'GIS', 'Energy', 'Data Viz'],
        connections: ['construction-acclimation', 'friendly-fires'],
        size: 0.9,
        links: [
          { type: 'website', url: '', label: 'Demo' }
        ],
        images: []
      },
      {
        id: 'construction-acclimation',
        title: 'Construction Acclimation',
        category: 'research',
        yearStart: 2022,
        yearEnd: 2023,
        monthStart: 'Oct',
        monthEnd: 'Apr',
        description: 'Gathered construction site data to develop alternative devices to costly acclimation probes, aiming to cut $118M from Palo Alto\'s spending. Built a website and functioning probe prototype that earned praise from city construction officials.',
        tags: ['Hardware', 'Data Collection', 'Web Dev', 'City Planning'],
        connections: ['atlas-smr', 'prototype-flood'],
        size: 0.8,
        links: [
          { type: 'website', url: '', label: 'Project Page' }
        ],
        images: []
      },
      {
        id: 'beachsweep',
        title: 'Beachsweep',
        category: 'hardware',
        yearStart: 2023,
        yearEnd: 2023,
        monthStart: 'Nov',
        monthEnd: 'Nov',
        description: 'Hackathon project designing a website for organizing drone beach cleanups. Utilized solar-powered drone docks that work to maintain beach cleanliness and collaborate with human initiatives. Designed a computer vision drone trash detection system.',
        tags: ['Drones', 'Computer Vision', 'Solar', 'Web Dev'],
        connections: ['friendly-fires', 'prototype-flood'],
        size: 0.75,
        links: [
          { type: 'github', url: '', label: 'GitHub' }
        ],
        images: []
      },
      {
        id: 'friendly-fires',
        title: 'Friendly Fires',
        category: 'social',
        yearStart: 2021,
        yearEnd: 2022,
        monthStart: 'Sep',
        monthEnd: 'Mar',
        description: 'Created a mining tool attachment consisting of a compact sensor array capable of consistently detecting coal-seam fires, aiming to save lives in dangerous and often neglected mining conditions.',
        tags: ['Sensors', 'Safety', 'Hardware', 'Mining'],
        connections: ['prototype-flood', 'atlas-smr', 'beachsweep'],
        size: 0.75,
        links: [
          { type: 'website', url: '', label: 'Documentation' }
        ],
        images: []
      },
      {
        id: 'prototype-flood',
        title: 'Prototype Ø Flood',
        category: 'social',
        yearStart: 2020,
        yearEnd: 2021,
        monthStart: 'Nov',
        monthEnd: 'May',
        description: 'Designed a low-cost flood detection system intended for addressing the lack of alert technology in Jakarta, Indonesia. Won certificate of achievement from the American Society of Civil Engineers.',
        tags: ['Sensors', 'IoT', 'Social Impact', 'International'],
        connections: ['friendly-fires', 'construction-acclimation', 'beachsweep'],
        size: 0.7,
        links: [
          { type: 'website', url: '', label: 'Project Page' }
        ],
        images: []
      }
    ];

    // SVG icons
    const icons = {
      website: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>',
      github: '<svg viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>'
    };

    // Canvas setup
    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');
    const tooltip = document.getElementById('nodeTooltip');
    const panel = document.getElementById('projectPanel');
    const panelClose = document.getElementById('panelClose');
    const overlay = document.getElementById('overlay');
    const lightbox = document.getElementById('lightbox');
    const lightboxClose = document.getElementById('lightboxClose');
    const lightboxImage = document.getElementById('lightboxImage');

    let width, height;
    let nodes = [];
    let edges = [];
    let hoveredNode = null;
    let selectedNode = null;
    let animationFrame;
    let time = 0;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width * window.devicePixelRatio;
      canvas.height = height * window.devicePixelRatio;
      canvas.style.width = width + 'px';
      canvas.style.height = height + 'px';
      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
      initNodes();
    }

    function initNodes() {
      const centerX = width / 2;
      const centerY = height / 2;
      
      const navHeight = 80;
      const padding = 120;
      const availableHeight = height - navHeight - padding;
      const availableWidth = width - padding * 2;
      const layoutRadius = Math.min(availableWidth, availableHeight) * 0.38;
      
      const sortedProjects = [...projects].sort((a, b) => b.size - a.size);
      
      nodes = sortedProjects.map((project, i) => {
        let x, y;
        const baseRadius = 14 + (project.size * 12);
        
        if (i === 0) {
          x = centerX;
          y = centerY - layoutRadius * 0.3;
        } else if (i === 1) {
          x = centerX - layoutRadius * 0.45;
          y = centerY - layoutRadius * 0.1;
        } else if (i === 2) {
          x = centerX + layoutRadius * 0.5;
          y = centerY;
        } else if (i === 3) {
          x = centerX + layoutRadius * 0.15;
          y = centerY + layoutRadius * 0.35;
        } else {
          const outerIndex = i - 4;
          const outerCount = sortedProjects.length - 4;
          const angle = (outerIndex / outerCount) * Math.PI * 1.4 + Math.PI * 0.8;
          x = centerX + Math.cos(angle) * layoutRadius * 0.85;
          y = centerY + Math.sin(angle) * layoutRadius * 0.7;
        }
        
        return {
          ...project,
          x,
          y,
          baseRadius,
          currentRadius: baseRadius
        };
      });

      edges = [];
      nodes.forEach(node => {
        if (node.connections) {
          node.connections.forEach(targetId => {
            const target = nodes.find(n => n.id === targetId);
            if (target && !edges.find(e => 
              (e.source.id === node.id && e.target.id === targetId) ||
              (e.source.id === targetId && e.target.id === node.id)
            )) {
              edges.push({ source: node, target });
            }
          });
        }
      });
    }

    function draw() {
      time += 0.016;
      ctx.clearRect(0, 0, width, height);

      edges.forEach(edge => {
        const dx = edge.target.x - edge.source.x;
        const dy = edge.target.y - edge.source.y;
        
        ctx.beginPath();
        ctx.moveTo(edge.source.x, edge.source.y);
        ctx.lineTo(edge.target.x, edge.target.y);
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.04)';
        ctx.lineWidth = 1;
        ctx.stroke();

        const speed = 0.08;
        const progress = ((time * speed) % 1);
        const px = edge.source.x + dx * progress;
        const py = edge.source.y + dy * progress;
        
        ctx.beginPath();
        ctx.arc(px, py, 1, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(255, 255, 255, 0.15)';
        ctx.fill();
      });

      nodes.forEach(node => {
        const isHovered = node === hoveredNode;
        const isSelected = node === selectedNode;
        
        const targetRadius = isHovered ? node.baseRadius * 1.15 : node.baseRadius;
        node.currentRadius += (targetRadius - node.currentRadius) * 0.15;
        const nodeRadius = node.currentRadius;

        if (isHovered) {
          const glowGradient = ctx.createRadialGradient(
            node.x, node.y, nodeRadius * 0.3,
            node.x, node.y, nodeRadius * 2
          );
          glowGradient.addColorStop(0, 'rgba(255, 255, 255, 0.12)');
          glowGradient.addColorStop(1, 'transparent');
          ctx.beginPath();
          ctx.arc(node.x, node.y, nodeRadius * 2, 0, Math.PI * 2);
          ctx.fillStyle = glowGradient;
          ctx.fill();
        }

        ctx.beginPath();
        ctx.arc(node.x, node.y, nodeRadius, 0, Math.PI * 2);
        ctx.strokeStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.7)' 
          : 'rgba(255, 255, 255, 0.15)';
        ctx.lineWidth = isHovered || isSelected ? 1.5 : 1;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(node.x, node.y, nodeRadius - 1, 0, Math.PI * 2);
        ctx.fillStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.04)' 
          : 'rgba(255, 255, 255, 0.01)';
        ctx.fill();

        const dotRadius = isHovered ? 3 : 2;
        ctx.beginPath();
        ctx.arc(node.x, node.y, dotRadius, 0, Math.PI * 2);
        ctx.fillStyle = isHovered 
          ? 'rgba(255, 255, 255, 0.95)' 
          : 'rgba(255, 255, 255, 0.3)';
        ctx.fill();

        ctx.font = `500 ${isHovered ? 12 : 11}px 'Inter', sans-serif`;
        ctx.fillStyle = isHovered || isSelected 
          ? 'rgba(255, 255, 255, 0.9)' 
          : 'rgba(255, 255, 255, 0.4)';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'top';
        ctx.fillText(node.title, node.x, node.y + nodeRadius + 10);
      });

      animationFrame = requestAnimationFrame(draw);
    }

    function getNodeAtPosition(x, y) {
      for (let i = nodes.length - 1; i >= 0; i--) {
        const node = nodes[i];
        const dx = x - node.x;
        const dy = y - node.y;
        const hitRadius = node.baseRadius * 1.5;
        if (dx * dx + dy * dy < hitRadius * hitRadius) {
          return node;
        }
      }
      return null;
    }

    function showPanel(node) {
      selectedNode = node;
      
      // Timeline
      document.getElementById('panelYearStart').textContent = node.yearStart;
      document.getElementById('panelYearEnd').textContent = node.yearEnd || 'Now';
      
      // Header info
      document.getElementById('panelCategory').textContent = node.category.toUpperCase();
      document.getElementById('panelTitle').textContent = node.title;
      
      // Duration string
      const startStr = `${node.monthStart} ${node.yearStart}`;
      const endStr = node.yearEnd ? `${node.monthEnd} ${node.yearEnd}` : 'Present';
      document.getElementById('panelDuration').textContent = `${startStr} — ${endStr}`;
      
      // Status
      const statusEl = document.getElementById('panelStatus');
      if (node.yearEnd === null) {
        statusEl.textContent = 'Active';
        statusEl.className = 'project-status active';
      } else {
        statusEl.textContent = 'Completed';
        statusEl.className = 'project-status completed';
      }
      
      document.getElementById('panelDescription').textContent = node.description;
      
      // Handle images
      const mainImage = document.getElementById('panelImageMain');
      const placeholder = document.getElementById('panelImagePlaceholder');
      const thumbsContainer = document.getElementById('panelImageThumbs');
      
      if (node.images && node.images.length > 0) {
        mainImage.src = node.images[0];
        mainImage.style.display = 'block';
        mainImage.onclick = () => openLightbox(node.images[0]);
        placeholder.style.display = 'none';
        
        if (node.images.length > 1) {
          thumbsContainer.innerHTML = node.images.map((img, i) => 
            `<img class="project-image-thumb ${i === 0 ? 'active' : ''}" src="${img}" data-index="${i}" alt="Thumbnail">`
          ).join('');
          thumbsContainer.style.display = 'flex';
          
          thumbsContainer.querySelectorAll('.project-image-thumb').forEach(thumb => {
            thumb.onclick = () => {
              mainImage.src = thumb.src;
              mainImage.onclick = () => openLightbox(thumb.src);
              thumbsContainer.querySelectorAll('.project-image-thumb').forEach(t => t.classList.remove('active'));
              thumb.classList.add('active');
            };
          });
        } else {
          thumbsContainer.style.display = 'none';
        }
      } else {
        mainImage.style.display = 'none';
        placeholder.style.display = 'flex';
        thumbsContainer.style.display = 'none';
      }
      
      // Handle links
      const linksContainer = document.getElementById('panelLinks');
      if (node.links && node.links.length > 0) {
        linksContainer.innerHTML = node.links.map(link => {
          const icon = icons[link.type] || icons.website;
          const isPlaceholder = !link.url;
          return `<a href="${link.url || '#'}" ${link.url ? 'target="_blank" rel="noopener noreferrer"' : ''} class="project-link${isPlaceholder ? ' placeholder' : ''}">${icon}${link.label}</a>`;
        }).join('');
        linksContainer.style.display = 'flex';
      } else {
        linksContainer.innerHTML = '<span class="project-link placeholder"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>Add Link</span>';
        linksContainer.style.display = 'flex';
      }
      
      // Handle tags
      const tagsContainer = document.getElementById('panelTags');
      tagsContainer.innerHTML = node.tags.map(tag => 
        `<span class="project-tag">${tag}</span>`
      ).join('');

      overlay.classList.add('visible');
      panel.classList.add('visible');
    }

    function hidePanel() {
      panel.classList.remove('visible');
      overlay.classList.remove('visible');
      selectedNode = null;
    }

    function openLightbox(src) {
      lightboxImage.src = src;
      lightbox.classList.add('visible');
    }

    function closeLightbox() {
      lightbox.classList.remove('visible');
    }

    // Event listeners
    canvas.addEventListener('mousemove', (e) => {
      const node = getNodeAtPosition(e.clientX, e.clientY);
      hoveredNode = node;
      canvas.style.cursor = node ? 'pointer' : 'default';

      if (node) {
        tooltip.textContent = node.title;
        tooltip.style.left = e.clientX + 15 + 'px';
        tooltip.style.top = e.clientY + 15 + 'px';
        tooltip.classList.add('visible');
      } else {
        tooltip.classList.remove('visible');
      }
    });

    canvas.addEventListener('mouseleave', () => {
      hoveredNode = null;
      tooltip.classList.remove('visible');
    });

    canvas.addEventListener('click', (e) => {
      const node = getNodeAtPosition(e.clientX, e.clientY);
      if (node) {
        showPanel(node);
      }
    });

    panelClose.addEventListener('click', hidePanel);
    overlay.addEventListener('click', hidePanel);
    lightboxClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    canvas.addEventListener('touchend', (e) => {
      if (e.changedTouches.length === 1) {
        const touch = e.changedTouches[0];
        const node = getNodeAtPosition(touch.clientX, touch.clientY);
        if (node) {
          e.preventDefault();
          showPanel(node);
        }
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (lightbox.classList.contains('visible')) {
          closeLightbox();
        } else if (panel.classList.contains('visible')) {
          hidePanel();
        }
      }
    });

    window.addEventListener('resize', resize);
    resize();
    draw();
  </script>
</body>
</html>
